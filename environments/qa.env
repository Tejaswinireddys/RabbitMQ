# RabbitMQ QA Environment Configuration
# Sources base configuration and overrides with QA-specific settings

# === Environment Info ===
ENVIRONMENT_NAME="qa"
ENVIRONMENT_TYPE="testing"

# === Cluster Name (Environment Specific) ===
RABBITMQ_CLUSTER_NAME="rabbitmq-qa-cluster"

# === Node Configuration ===
RABBITMQ_NODE_1_HOSTNAME="qa-rmq-node1"
RABBITMQ_NODE_2_HOSTNAME="qa-rmq-node2"
RABBITMQ_NODE_3_HOSTNAME="qa-rmq-node3"

# === IP Addresses (Update with actual QA environment IPs) ===
RABBITMQ_NODE_1_IP="10.10.10.10"
RABBITMQ_NODE_2_IP="10.10.10.11"
RABBITMQ_NODE_3_IP="10.10.10.12"

# === Load Balancer Configuration ===
RABBITMQ_VIP="10.10.10.100"
HAPROXY_HOST="10.10.10.101"

# === SSL Certificate Paths ===
RABBITMQ_SSL_CACERT="$RABBITMQ_SSL_CERT_DIR/qa/ca_certificate.pem"
RABBITMQ_SSL_CERT="$RABBITMQ_SSL_CERT_DIR/qa/server_certificate.pem"
RABBITMQ_SSL_KEY="$RABBITMQ_SSL_CERT_DIR/qa/server_key.pem"

# === Environment-specific Performance Settings ===
RABBITMQ_VM_MEMORY_HIGH_WATERMARK="0.5"
RABBITMQ_DISK_FREE_LIMIT="1GB"

# === QA-specific Monitoring ===
PROMETHEUS_PUSHGATEWAY="http://qa-prometheus-pushgateway:9091"
GRAFANA_URL="http://qa-grafana:3000"

# === Email Alerting for QA ===
EMAIL_ALERTS="qa-team@company.com,rabbitmq-alerts@company.com"
SLACK_WEBHOOK="https://hooks.slack.com/services/YOUR/QA/WEBHOOK"

# === QA Database/External Dependencies ===
EXTERNAL_DB_HOST="qa-db.company.com"
EXTERNAL_API_ENDPOINT="https://qa-api.company.com"

# === Node-specific Configuration ===
# Node 1 (Primary in QA)
RABBITMQ_NODE_1_DISK_FREE_LIMIT="1GB"
RABBITMQ_NODE_1_MEMORY_LIMIT="2GB"

# Node 2 (Secondary)
RABBITMQ_NODE_2_DISK_FREE_LIMIT="1GB"
RABBITMQ_NODE_2_MEMORY_LIMIT="2GB"

# Node 3 (Secondary)
RABBITMQ_NODE_3_DISK_FREE_LIMIT="1GB"
RABBITMQ_NODE_3_MEMORY_LIMIT="2GB"

# === Environment-specific Features ===
RABBITMQ_ENABLE_FEATURE_FLAGS="all"
RABBITMQ_DEBUG_MODE="false"

# === Backup Configuration for QA ===
RABBITMQ_BACKUP_RETENTION_DAYS="7"
RABBITMQ_BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
# === QA Auto-Recovery Settings ===
RABBITMQ_FORCE_BOOT_ON_STARTUP="true"   # Aggressive recovery for QA
RABBITMQ_AUTO_RECOVERY_DELAY="15"       # Quick recovery for testing
RABBITMQ_STARTUP_TIMEOUT="180"          # 3 minutes for QA startup

# === QA Monitor Settings ===
RABBITMQ_MONITOR_CHECK_INTERVAL="30"    # Frequent checks for testing
RABBITMQ_MONITOR_RECOVERY_TIMEOUT="180" # Quick recovery for QA
RABBITMQ_MONITOR_MAX_FAILURES="2"       # Quick recovery trigger
RABBITMQ_MONITOR_RECOVERY_COOLDOWN="300" # 5 minutes between attempts
